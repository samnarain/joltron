general:
  artifacts:
    - "joltron_linux"
    - "joltron_osx"
    - "joltron_win32.exe"

dependencies:
  override:
    - mkdir -p ~/.go_project/src/github.com/${CIRCLE_PROJECT_USERNAME}
    - ln -s ${HOME}/${CIRCLE_PROJECT_REPONAME} ${HOME}/.go_project/src/github.com/${CIRCLE_PROJECT_USERNAME}/${CIRCLE_PROJECT_REPONAME}
    - go get github.com/campoy/jsonenums
    - go get -t -d -v ./...
    - CGO_ENABLED=0 GOOS=linux GOARCH=386 sh ./build.sh
    - mv ./joltron ./joltron_linux
    - CGO_ENABLED=0 GOOS=darwin GOARCH=386 sh ./build.sh
    - mv ./joltron ./joltron_osx
    - CGO_ENABLED=0 GOOS=windows GOARCH=386 sh ./build.sh
    - mv ./joltron.exe ./joltron_win32.exe
    - ls -lah
